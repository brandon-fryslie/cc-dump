{"id":"cc-dump-01a","title":"Hot reload should maintain conversation history and metrics","description":"Hot reload currently loses conversation history and metrics. These should persist across reloads.\n\n## Problem\nWhen hot reload is triggered (r key), the TUI loses:\n- Conversation history (all turn data)\n- Accumulated metrics (token counts, cost data, timeline)\n- Scroll position and UI state\n\n## Expected Behavior\nHot reload should:\n- Preserve all conversation turn data (TurnData objects in ConversationView)\n- Maintain accumulated metrics in analytics panels (cost, timeline)\n- Ideally preserve scroll position and visibility settings\n- Only reload the code modules, not the application state\n\n## Implementation Approach\n- Separate reloadable code from stateful data\n- Store turn data and metrics in stable objects that aren't replaced during reload\n- Ensure hot_reload.py only reloads module code, not data structures\n- May need to redesign state management to separate code from data\n\n## Success Criteria\n- After hot reload (r key), all previous conversation turns are still visible\n- Cost panel shows cumulative metrics from before reload\n- Timeline panel maintains all historical data\n- Scroll position ideally preserved (nice-to-have)\n- No data loss on reload","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-10T05:36:06.009011-07:00","created_by":"Brandon Fryslie","updated_at":"2026-02-10T05:36:06.009011-07:00","dependencies":[{"issue_id":"cc-dump-01a","depends_on_id":"cc-dump-ay4","type":"blocks","created_at":"2026-02-10T05:49:12.60264-07:00","created_by":"Brandon Fryslie"},{"issue_id":"cc-dump-01a","depends_on_id":"cc-dump-6dh","type":"blocks","created_at":"2026-02-10T05:53:45.710486-07:00","created_by":"Brandon Fryslie"}]}
{"id":"cc-dump-04a","title":"When using Skill tool, show skill name","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-24T21:50:21.463575-07:00","created_by":"bmf","updated_at":"2026-01-30T15:48:09.009191-07:00","closed_at":"2026-01-30T15:48:09.009191-07:00","close_reason":"Implemented in Sprint 3 (tool-display-enrich), commit 94dd3a3. _tool_detail() extracts skill name from Skill tool input."}
{"id":"cc-dump-08z","title":"Investigate multi-session architecture and requirements","description":"Research and design architecture for multi-session support in cc-dump.\n\n## Goals\n- Understand current single-session architecture constraints\n- Design multi-session data model and storage\n- Define UI/UX for session management\n- Identify breaking changes vs. backwards compatibility\n- Estimate implementation effort\n\n## Research Questions\n- How should sessions be identified and stored? (session_id in DB, HAR files)\n- Should we support concurrent live sessions or only historical replay?\n- How does the TUI switch between sessions? (tabs, split view, modal selector)\n- What analytics make sense across multiple sessions?\n- How does this interact with HAR recording/replay?\n- What's the relationship to the existing sessions.py module?\n\n## Deliverables\n- Architecture document or design proposal\n- Data model changes required\n- UI mockups or wireframes (text-based is fine)\n- Implementation plan with phases\n- Risk assessment and migration strategy\n\n## Epic\nPart of cc-dump-888: Multi-session support","status":"open","priority":3,"issue_type":"task","created_at":"2026-02-10T05:38:30.9725-07:00","created_by":"Brandon Fryslie","updated_at":"2026-02-10T05:38:30.9725-07:00","dependencies":[{"issue_id":"cc-dump-08z","depends_on_id":"cc-dump-ay4","type":"blocks","created_at":"2026-02-10T05:49:13.675769-07:00","created_by":"Brandon Fryslie"}]}
{"id":"cc-dump-0ai","title":"Add tabbed container for multiple Claude Code instances","description":"Support multiple Claude Code instances in the TUI. One tab per Claude Code instance, with ConversationView inside TabbedContent. Depends on request-ID tagging to distinguish which instance each request belongs to.","status":"open","priority":3,"issue_type":"task","created_at":"2026-02-12T15:34:23.163761-07:00","created_by":"Brandon Fryslie","updated_at":"2026-02-12T15:34:23.163761-07:00","labels":["concurrency","tui"],"dependencies":[{"issue_id":"cc-dump-0ai","depends_on_id":"cc-dump-q4k","type":"blocks","created_at":"2026-02-12T15:34:35.200236-07:00","created_by":"Brandon Fryslie"}]}
{"id":"cc-dump-0fe","title":"Implement partial cache invalidation for affected turns","description":"Replace cache.clear() with targeted invalidation that only removes entries for changed turn ranges. Add _invalidate_cache_for_turns(start, end) method and update cache keys to include turn context. Blocked by cc-dump-0oo (needs incremental offset logic).","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-03T03:20:01.875959-07:00","created_by":"bmf","updated_at":"2026-02-03T03:20:01.875959-07:00","dependencies":[{"issue_id":"cc-dump-0fe","depends_on_id":"cc-dump-0oo","type":"blocked-by","created_at":"2026-02-03T03:20:01.878645-07:00","created_by":"bmf"},{"issue_id":"cc-dump-0fe","depends_on_id":"cc-dump-ghm","type":"blocks","created_at":"2026-02-03T03:20:01.879367-07:00","created_by":"bmf"},{"issue_id":"cc-dump-0fe","depends_on_id":"cc-dump-ay4","type":"blocks","created_at":"2026-02-10T05:49:13.514016-07:00","created_by":"Brandon Fryslie"}]}
{"id":"cc-dump-0oo","title":"Implement incremental offset recalculation","description":"Replace _recalculate_offsets() with _recalculate_offsets_from(start_turn_index) that only rebuilds offsets from the first changed turn onwards. Reduces O(n) to O(k) where k is turns after first change. Blocked by cc-dump-ax6 (needs changed range tracking).","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-03T03:19:38.048164-07:00","created_by":"bmf","updated_at":"2026-02-03T04:00:50.977132-07:00","closed_at":"2026-02-03T04:00:50.977135-07:00","dependencies":[{"issue_id":"cc-dump-0oo","depends_on_id":"cc-dump-ax6","type":"blocked-by","created_at":"2026-02-03T03:19:38.0512-07:00","created_by":"bmf"},{"issue_id":"cc-dump-0oo","depends_on_id":"cc-dump-ghm","type":"blocks","created_at":"2026-02-03T03:19:38.052286-07:00","created_by":"bmf"}]}
{"id":"cc-dump-16r","title":"Implement viewport-only re-rendering","description":"Add _viewport_turn_range() method and modify rerender() to only re-render turns visible in viewport + buffer. Mark off-viewport turns with _pending_filter_snapshot for lazy rendering. Requires Phase 1 baseline optimizations (cc-dump-ax6, cc-dump-0oo, cc-dump-e38) to be complete first.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-03T03:19:51.090381-07:00","created_by":"bmf","updated_at":"2026-02-03T13:48:50.72103-07:00","closed_at":"2026-02-03T13:48:50.72103-07:00","close_reason":"Implemented viewport-only re-rendering: added _viewport_turn_range() method, modified rerender() to only process visible turns + buffer (default 200 lines), off-viewport turns get _pending_filter_snapshot for lazy rendering by cc-dump-bbe","dependencies":[{"issue_id":"cc-dump-16r","depends_on_id":"cc-dump-ax6","type":"blocked-by","created_at":"2026-02-03T03:19:51.093233-07:00","created_by":"bmf"},{"issue_id":"cc-dump-16r","depends_on_id":"cc-dump-0oo","type":"blocked-by","created_at":"2026-02-03T03:19:51.09405-07:00","created_by":"bmf"},{"issue_id":"cc-dump-16r","depends_on_id":"cc-dump-e38","type":"blocked-by","created_at":"2026-02-03T03:19:51.094623-07:00","created_by":"bmf"},{"issue_id":"cc-dump-16r","depends_on_id":"cc-dump-ghm","type":"blocks","created_at":"2026-02-03T03:19:51.095114-07:00","created_by":"bmf"}]}
{"id":"cc-dump-1nq","title":"Sprint 2: Query layer and panel updates","description":"Update query layer and economics panel with new columns.\n\nDeliverables:\n- New db query: get_tool_economics() with cache attribution\n- Panel columns: Calls | Input (Cached) | Output (Cached) | Norm Cost\n- Wire ToolEconomicsPanel to use new query\n- Remove fake byte-based estimates\n\nSee: .agent_planning/tool-attribution/SPRINT-20260203-130000-query-panel-update-PLAN.md\n\nStatus: HIGH confidence, READY (blocked by Sprint 1)","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-03T03:20:58.422046-07:00","created_by":"bmf","updated_at":"2026-02-03T04:54:29.270092-07:00","closed_at":"2026-02-03T04:54:29.270096-07:00","dependencies":[{"issue_id":"cc-dump-1nq","depends_on_id":"cc-dump-s3v","type":"blocks","created_at":"2026-02-03T03:20:58.426271-07:00","created_by":"bmf"}]}
{"id":"cc-dump-1vp","title":"Tool use summary not showing when tool view is off","description":"When the tools filter is off, consecutive ToolUseBlocks should collapse into a summary line like '[used 3 tools: Bash 2x, Read 1x]'. The summary logic exists in render_blocks() in rendering.py, but both real render paths (widget_factory.py:380 streaming path and render_turn_to_strips rerender path) call render_block() per-block individually, bypassing render_blocks() entirely. The summary is never generated. Fix: add the consecutive-ToolUseBlock collapsing logic to render_turn_to_strips and the streaming path in widget_factory.py, or refactor those paths to use render_blocks().","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-02-01T00:45:31.118559-07:00","created_by":"bmf","updated_at":"2026-02-06T20:03:03.30741-07:00","closed_at":"2026-02-06T20:03:03.30741-07:00","close_reason":"Bug description was factually incorrect. render_turn_to_strips() at rendering.py:479 iterates render_blocks() output, which includes tool summary logic. The summary IS generated for completed turns. compute_relevant_keys() picks up 'tools' from ToolUseBlock via BLOCK_FILTER_KEY, so filter toggles trigger re-render correctly."}
{"id":"cc-dump-2c1","title":"Fix level/expanded state toggling","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-02-10T05:18:40.991545-07:00","created_by":"Brandon Fryslie","updated_at":"2026-02-11T00:52:32.290306-07:00","closed_at":"2026-02-11T00:52:32.290306-07:00","close_reason":"Implemented three orthogonal reactive dicts (_is_visible, _is_full, _is_expanded) to fix visibility toggling. Fixed critical bug: expanded state is now derived from level defaults (DEFAULT_EXPANDED[level]) instead of independent toggle, ensuring EXISTENCE level shows 0 lines (hidden), SUMMARY shows 3 lines (collapsed), and FULL shows unlimited lines (expanded). All 199 visibility tests pass.","dependencies":[{"issue_id":"cc-dump-2c1","depends_on_id":"cc-dump-ay4","type":"blocks","created_at":"2026-02-10T05:49:13.090088-07:00","created_by":"Brandon Fryslie"}]}
{"id":"cc-dump-2x3","title":"Add XML-aware syntax highlighting","description":"Add XML-aware syntax highlighting to system, user, and assistant content blocks.\n\n## Requirements\n\n### XML Tag Rendering\n- XML tags embedded in system blocks, user blocks, and assistant blocks are parsed and rendered with color (distinct tag colors)\n- Content inside XML tags is rendered as markdown\n- Any nested markdown code blocks within XML content must be escaped with backticks\n\n### XML Parsing\n- MUST use the existing XML parsing code — do not duplicate it. Update the existing parser as needed.\n- MUST parse XML where tags are NOT on separate lines (current deficiency: parser only handles tags on their own lines)\n\n### Expand/Collapse Behavior\n- Ensure expand/collapse works for all top-level XML blocks (the colorized XML sections)\n- DISABLE the 'click on block content to collapse/expand' functionality — it conflicts with XML collapse/expand\n- Users must click the arrow indicator to expand/collapse, not anywhere on the block content\n\n## Technical Context\n- Existing XML parsing lives somewhere in the formatting/rendering pipeline — find and extend it\n- The rendering pipeline: formatting.py (FormattedBlock IR) → rendering.py (Rich Text)\n- Blocks involved: system prompt blocks, user message blocks, assistant message blocks\n- The 3-level visibility system (EXISTENCE/SUMMARY/FULL) × expanded state must work with XML sub-blocks\n\n## Success Criteria\n- XML tags in system/user/assistant content are visually distinct with color\n- Content within XML tags renders as markdown\n- Inline XML tags (not on separate lines) are correctly parsed\n- Click-to-expand on block content is disabled; only arrow clicks toggle expand/collapse\n- All existing tests pass; new tests cover XML parsing edge cases","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-10T05:18:41.868538-07:00","created_by":"Brandon Fryslie","updated_at":"2026-02-12T15:17:22.868514-07:00","closed_at":"2026-02-12T15:17:22.868514-07:00","close_reason":"Implemented XML-aware syntax highlighting using Rich Syntax with html lexer","dependencies":[{"issue_id":"cc-dump-2x3","depends_on_id":"cc-dump-ay4","type":"blocks","created_at":"2026-02-10T05:49:13.033757-07:00","created_by":"Brandon Fryslie"},{"issue_id":"cc-dump-2x3","depends_on_id":"cc-dump-9cx","type":"blocks","created_at":"2026-02-10T05:53:45.862849-07:00","created_by":"Brandon Fryslie"}]}
{"id":"cc-dump-31a","title":"Intentional memory management - prevent memory leaks","description":"Ensure cc-dump has intentional memory management and does not leak memory over long-running sessions.\n\n## Concerns\n- Hot reload mechanism may not properly clean up old module references\n- TurnData accumulation in ConversationView grows unbounded\n- Event handlers and subscribers may hold references preventing GC\n- Strip caching may grow indefinitely\n- HAR recorder may accumulate unbounded data in memory\n\n## Investigation Needed\n- Profile memory usage over extended sessions (1000+ turns)\n- Check for circular references preventing garbage collection\n- Verify hot reload properly releases old module objects\n- Review subscriber/event handler lifecycle\n- Assess TurnData and Strip cache growth patterns\n\n## Implementation Approach\n- Add memory profiling/monitoring capability\n- Implement bounded caches with eviction policies (LRU)\n- Ensure proper cleanup in hot reload (weakref where appropriate)\n- Consider pagination/virtualization for very long conversations\n- Add memory usage to analytics panel (optional)\n\n## Success Criteria\n- Memory usage remains stable over 1000+ turn sessions\n- Hot reload does not leak module references\n- Caches have documented size limits and eviction policies\n- No circular references preventing GC\n- Memory profiling shows predictable growth patterns","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-10T05:38:11.127009-07:00","created_by":"Brandon Fryslie","updated_at":"2026-02-10T05:38:11.127009-07:00","dependencies":[{"issue_id":"cc-dump-31a","depends_on_id":"cc-dump-ay4","type":"blocks","created_at":"2026-02-10T05:49:12.549701-07:00","created_by":"Brandon Fryslie"},{"issue_id":"cc-dump-31a","depends_on_id":"cc-dump-6dh","type":"blocks","created_at":"2026-02-10T05:53:45.786645-07:00","created_by":"Brandon Fryslie"}]}
{"id":"cc-dump-3bb","title":"Remove or fix Economics panel fake byte-based token estimates","description":"The Economics panel uses byte-based token estimation (estimate_tokens('x' * bytes)) which produces fake data. User mandate: 'We should not be estimating tokens based on bytes. PERIOD.' Either fix to use real API token counts or remove the panel entirely. Blocked until panel strategy decision is made. Ref: docs/plans/2026-02-01-analytics-dashboard-findings.md","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-02T12:51:22.075207-07:00","created_by":"bmf","updated_at":"2026-02-03T05:49:57.096711-07:00","closed_at":"2026-02-03T05:49:57.096711-07:00","close_reason":"Duplicate of cc-dump-dos. Tool economics panel now uses real token counts from tool_invocations table (input_tokens, result_tokens) via Sprint 1-3 implementation. See get_tool_economics() in db_queries.py:112-200.","dependencies":[{"issue_id":"cc-dump-3bb","depends_on_id":"cc-dump-4z3","type":"blocks","created_at":"2026-02-02T12:52:00.344047-07:00","created_by":"bmf"}]}
{"id":"cc-dump-4z3","title":"Decide whether to replace or augment existing analytics panels","description":"Architecture decision: what to do with existing Stats, Economics, and Timeline panels. Options: (A) Replace all three with single Analytics dashboard. (B) Add Analytics alongside existing panels. (C) Incremental migration - Phase 1: add Analytics with real data, Phase 2: deprecate Economics (fake byte estimates), Phase 3: merge Stats+Timeline into Analytics. Ref: docs/plans/2026-02-01-analytics-dashboard-findings.md Decision 3","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-02T12:51:18.42149-07:00","created_by":"bmf","updated_at":"2026-02-02T12:51:18.42149-07:00","dependencies":[{"issue_id":"cc-dump-4z3","depends_on_id":"cc-dump-ay4","type":"blocks","created_at":"2026-02-10T05:49:13.5684-07:00","created_by":"Brandon Fryslie"}]}
{"id":"cc-dump-5hc","title":"Add recording cleanup functionality","description":"Provide a way to clean up/delete old HAR recordings. Could be: CLI command, TUI interface, or automatic cleanup based on age/size/count limits.","status":"open","priority":3,"issue_type":"task","created_at":"2026-02-09T17:01:49.027233-07:00","created_by":"Brandon Fryslie","updated_at":"2026-02-09T17:01:49.027233-07:00","dependencies":[{"issue_id":"cc-dump-5hc","depends_on_id":"cc-dump-ay4","type":"blocks","created_at":"2026-02-10T05:49:13.836806-07:00","created_by":"Brandon Fryslie"}]}
{"id":"cc-dump-5nd","title":"Decide subagent token attribution approach","description":"Architecture decision needed for subagent token attribution. Options: (A) Tool-level only - track subagent_type in tool_invocations, show call counts but not subagent API usage. (B) Session correlation - link subagent sessions to parent Task invocations, requires session management changes. (C) Defer - ship dashboard without subagent breakdown. Currently subagent_type is in request_json but not extracted to a queryable column. Ref: docs/plans/2026-02-01-analytics-dashboard-findings.md Decision 1","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-02T12:51:11.273538-07:00","created_by":"bmf","updated_at":"2026-02-03T05:54:49.260602-07:00","closed_at":"2026-02-03T05:54:49.260602-07:00","close_reason":"Won't implement. Subagent attribution adds significant complexity for unclear benefit. Current per-tool and per-model breakdowns are sufficient. If subagent tracking becomes necessary in the future, can revisit as a new requirement."}
{"id":"cc-dump-5t7","title":"When using Bash tool, show bash command name and a few args","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-24T21:50:23.769884-07:00","created_by":"bmf","updated_at":"2026-01-30T15:48:10.594361-07:00","closed_at":"2026-01-30T15:48:10.594361-07:00","close_reason":"Implemented in Sprint 3 (tool-display-enrich), commit 94dd3a3. _tool_detail() extracts first line of bash command."}
{"id":"cc-dump-5th","title":"Add named session support for organizing recordings","description":"Add the concept of a named 'session' to cc-dump for better organization of recordings and saved data.\n\n## Scope\nPrimarily structural changes to recordings/data organization. Minimal functional changes, minimal UI changes.\n\n## Recording Organization\n- All recordings saved to subdirectory named `\u003csession name\u003e/` instead of flat directory\n- Unnamed sessions go into `unnamed-session/` directory\n- User can explicitly specify `--session unnamed-session` (not an error, uses that directory)\n\n## CLI\n- Add CLI argument: `cc-dump --session \u003csession name\u003e`\n\n## UI Changes\n- Display session name in app border at top of screen\n- Format: `┌────────session: my-session──────────────────┐` (session label)\n- Session label must be theme-aware (use palette colors)\n\n## Success Criteria\n- Recordings organized into session-named subdirectories\n- CLI accepts --session argument\n- Session name displayed in UI border\n- Theme-aware styling for session label\n- Unnamed sessions cleanly handled\n- No regression in existing functionality","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-10T11:22:12.74497-07:00","created_by":"Brandon Fryslie","updated_at":"2026-02-11T15:21:48.165236-07:00","closed_at":"2026-02-11T15:21:48.165236-07:00","close_reason":"Implemented successfully. All 579 tests pass. Recording organization, CLI argument, UI display, and backwards compatibility all verified.","dependencies":[{"issue_id":"cc-dump-5th","depends_on_id":"cc-dump-888","type":"parent-child","created_at":"2026-02-10T11:38:26.139127-07:00","created_by":"Brandon Fryslie"}]}
{"id":"cc-dump-62j","title":"Fix token count accuracy - count once per request, not per message block","description":"Token counts are currently inflated because they're being counted once per message block instead of once per request.\n\n## Problem\n- Tokens are scoped per request in the Anthropic API\n- Current implementation multiplies token counts by the number of message blocks\n- This dramatically inflates reported token usage (e.g., 5 blocks × 1000 tokens = 5000 reported instead of 1000 actual)\n\n## Root Cause\nToken counting logic is likely in the message block processing loop instead of at the request level.\n\n## Expected Behavior\n- Input tokens: counted once per request (from usage.input_tokens in API response)\n- Output tokens: counted once per request (from usage.output_tokens in API response)\n- Cache tokens: counted once per request if present\n- Database analytics and cost calculations should reflect actual API usage\n\n## Success Criteria\n- Token counts match API response usage fields exactly\n- Cost panel displays accurate token usage\n- Database token_usage table has one row per request with correct counts\n- No multiplication by message block count","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-02-10T05:35:19.324982-07:00","created_by":"Brandon Fryslie","updated_at":"2026-02-11T23:51:59.460722-07:00","closed_at":"2026-02-11T23:51:59.460722-07:00","close_reason":"Closed","dependencies":[{"issue_id":"cc-dump-62j","depends_on_id":"cc-dump-ay4","type":"blocks","created_at":"2026-02-10T05:49:12.65657-07:00","created_by":"Brandon Fryslie"}]}
{"id":"cc-dump-6dh","title":"Refactor widget factory and app for simplicity, modularity/composability, data-driven architecture","description":"Push side effects to edges. Improve composability and modularity of widget_factory.py and the rest of the app.","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-10T05:18:44.113268-07:00","created_by":"Brandon Fryslie","updated_at":"2026-02-10T05:18:44.113268-07:00","dependencies":[{"issue_id":"cc-dump-6dh","depends_on_id":"cc-dump-ay4","type":"blocks","created_at":"2026-02-10T05:49:12.925189-07:00","created_by":"Brandon Fryslie"}]}
{"id":"cc-dump-6qa","title":"Sprint 3: Model attribution research","description":"Research model attribution for tool economics.\n\nDeliverables:\n- Research: Are all tools in a turn always the same model?\n- Verify mixed-model pricing scenarios\n- Sub-agent attribution (stretch goal)\n\nSee: .agent_planning/tool-attribution/SPRINT-20260203-140000-model-attribution-PLAN.md\n\nStatus: MEDIUM confidence (1 HIGH, 2 MEDIUM items), needs research first","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-03T03:21:07.139599-07:00","created_by":"bmf","updated_at":"2026-02-03T05:39:10.220025-07:00","closed_at":"2026-02-03T05:39:10.220025-07:00","close_reason":"Research completed through user clarification: tools across a session use different models (Sonnet/Opus/Haiku). Database already supports this via turn_id→turns.model. Implemented dual-view solution: aggregate (default) and per-model breakdown (Ctrl+M toggle)."}
{"id":"cc-dump-6qw","title":"Add specific renderers for common tool results (Read, Write, Bash, etc)","description":"Create specialized renderers for frequently-used tool results (Read, Write, Bash, Grep, Glob, etc.) to improve readability. Currently all tool results use generic rendering.","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-10T05:19:47.2344-07:00","created_by":"Brandon Fryslie","updated_at":"2026-02-10T05:19:47.2344-07:00","dependencies":[{"issue_id":"cc-dump-6qw","depends_on_id":"cc-dump-ay4","type":"blocks","created_at":"2026-02-10T05:49:12.763888-07:00","created_by":"Brandon Fryslie"},{"issue_id":"cc-dump-6qw","depends_on_id":"cc-dump-9cx","type":"blocks","created_at":"2026-02-10T05:53:46.017102-07:00","created_by":"Brandon Fryslie"}]}
{"id":"cc-dump-848","title":"Design footer indicator for level+expansion state","description":"Find a visual indicator that shows BOTH visibility level (1/2/3 = EXISTENCE/SUMMARY/FULL) AND expansion state (collapsed/expanded) in a single icon or glyph. This is a tall order but would improve footer UX significantly. Current system only shows level, not expansion state.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-09T17:01:54.257656-07:00","created_by":"Brandon Fryslie","updated_at":"2026-02-10T17:01:58.398972-07:00","closed_at":"2026-02-10T17:01:58.398972-07:00","close_reason":"Closed","dependencies":[{"issue_id":"cc-dump-848","depends_on_id":"cc-dump-ay4","type":"blocks","created_at":"2026-02-10T05:49:13.306946-07:00","created_by":"Brandon Fryslie"}]}
{"id":"cc-dump-888","title":"Multi-session support","description":"Epic for multi-session support - ability to view and manage multiple Claude Code sessions simultaneously.\n\n## Vision\nEnable cc-dump to handle multiple concurrent sessions, with UI support for switching between sessions, comparing sessions, and aggregate analytics across sessions.\n\n## Potential Features\n- Session list/selector UI\n- Session switching without restart\n- Multi-session analytics and comparison\n- Session persistence and restore\n- Concurrent session monitoring\n\n## Initial Work\nSee cc-dump-08z: Investigate multi-session architecture and requirements","status":"open","priority":3,"issue_type":"epic","created_at":"2026-02-10T05:38:19.213183-07:00","created_by":"Brandon Fryslie","updated_at":"2026-02-10T05:38:37.383837-07:00","dependencies":[{"issue_id":"cc-dump-888","depends_on_id":"cc-dump-ay4","type":"blocks","created_at":"2026-02-10T05:49:13.730572-07:00","created_by":"Brandon Fryslie"},{"issue_id":"cc-dump-888","depends_on_id":"cc-dump-08z","type":"blocks","created_at":"2026-02-10T05:53:46.541152-07:00","created_by":"Brandon Fryslie"}]}
{"id":"cc-dump-8bn","title":"Build minimal analytics dashboard with real API data","description":"Build a unified analytics dashboard using only real API data from the turns table. No estimates or byte-based approximations. Views: (1) Summary - session totals, cache efficiency, cost. (2) Timeline - per-turn progression (cache%, delta). (3) Models - breakdown by model. Data: input_tokens, output_tokens, cache_read_tokens, cache_creation_tokens. UX: single dashboard, cycle views with Tab. Ref: docs/plans/2026-02-01-analytics-dashboard-findings.md","status":"open","priority":1,"issue_type":"task","created_at":"2026-02-02T12:51:09.075659-07:00","created_by":"bmf","updated_at":"2026-02-02T12:51:09.075659-07:00","dependencies":[{"issue_id":"cc-dump-8bn","depends_on_id":"cc-dump-5nd","type":"blocks","created_at":"2026-02-02T12:51:51.757253-07:00","created_by":"bmf"},{"issue_id":"cc-dump-8bn","depends_on_id":"cc-dump-ekt","type":"blocks","created_at":"2026-02-02T12:51:54.586942-07:00","created_by":"bmf"},{"issue_id":"cc-dump-8bn","depends_on_id":"cc-dump-4z3","type":"blocks","created_at":"2026-02-02T12:51:57.268529-07:00","created_by":"bmf"},{"issue_id":"cc-dump-8bn","depends_on_id":"cc-dump-ay4","type":"blocks","created_at":"2026-02-10T05:49:12.496365-07:00","created_by":"Brandon Fryslie"},{"issue_id":"cc-dump-8bn","depends_on_id":"cc-dump-62j","type":"blocks","created_at":"2026-02-10T05:53:45.632913-07:00","created_by":"Brandon Fryslie"}]}
{"id":"cc-dump-8vl","title":"Streaming text not aggregated into final block - shows chunked output with newlines","description":"When a streaming text block finishes, the final rendered output still shows the raw chunked streaming fragments separated by newlines instead of the complete aggregated text. Each SSE chunk appears on its own line, producing output like:\\n\\nAll\\n\\n7 tracked\\n be\\nads\\n are closed\\n\\nExpected: once streaming completes, the block should re-render with the full concatenated text as a single paragraph.","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-30T15:53:19.72004-07:00","created_by":"bmf","updated_at":"2026-01-30T16:00:33.805941-07:00","closed_at":"2026-01-30T16:00:33.805941-07:00","close_reason":"Fixed in commit 1545b4e. StreamingRichLog.finalize() now consolidates consecutive TextDeltaBlock objects into a single TextContentBlock before returning to ConversationView."}
{"id":"cc-dump-9cx","title":"Ensure code syntax highlighting is working","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-10T05:18:40.193248-07:00","created_by":"Brandon Fryslie","updated_at":"2026-02-11T23:52:39.417967-07:00","closed_at":"2026-02-11T23:52:39.417967-07:00","close_reason":"Closed","dependencies":[{"issue_id":"cc-dump-9cx","depends_on_id":"cc-dump-ay4","type":"blocks","created_at":"2026-02-10T05:49:13.146379-07:00","created_by":"Brandon Fryslie"}]}
{"id":"cc-dump-9pt","title":"Virtually render the conversation panel","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-01-24T21:48:06.077243-07:00","created_by":"bmf","updated_at":"2026-01-30T15:48:16.166139-07:00","closed_at":"2026-01-30T15:48:16.166139-07:00","close_reason":"Implemented in Sprint 1 (widget-arch). ConversationView uses ScrollView + Line API with virtual rendering via render_line()."}
{"id":"cc-dump-9v5","title":"Add specific renderers for common tool results (Read, Write, Bash, etc)","description":"Create specialized renderers for frequently-used tool results (Read, Write, Bash, Grep, Glob, etc.) to improve readability. Currently all tool results use generic rendering.","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-10T05:19:51.061343-07:00","created_by":"Brandon Fryslie","updated_at":"2026-02-10T05:19:51.061343-07:00","dependencies":[{"issue_id":"cc-dump-9v5","depends_on_id":"cc-dump-ay4","type":"blocks","created_at":"2026-02-10T05:49:12.710726-07:00","created_by":"Brandon Fryslie"},{"issue_id":"cc-dump-9v5","depends_on_id":"cc-dump-9cx","type":"blocks","created_at":"2026-02-10T05:53:45.940789-07:00","created_by":"Brandon Fryslie"}]}
{"id":"cc-dump-a00","title":"Fix keybindings: replace 'q' for exiting search in NAVIGATING context","description":"q must not be used for exiting search in the NAVIGATING context. Changes needed:\n- Tab: exits search, keep position\n- Esc: exits search, keep position\n- Backtick (`): exits search, restore position","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-02-10T17:18:31.343587-07:00","created_by":"Brandon Fryslie","updated_at":"2026-02-11T08:52:38.428172-07:00","closed_at":"2026-02-11T08:52:38.428172-07:00","close_reason":"Closed"}
{"id":"cc-dump-a0t","title":"Headers functionality should show HTTP headers","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-24T21:48:07.918391-07:00","created_by":"bmf","updated_at":"2026-01-30T15:48:14.538006-07:00","closed_at":"2026-01-30T15:48:14.538006-07:00","close_reason":"Implemented in Sprint 5 (http-headers), commit aa5ae61. Proxy emits HTTP headers, displayed under headers filter toggle."}
{"id":"cc-dump-aj7","title":"Match text colors to Claude Code/Textual theme","description":"Text colors (especially in markdown rendering) should match either Claude Code's theme or Textual's built-in theme for better visual consistency and familiarity.","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-09T17:01:46.039449-07:00","created_by":"Brandon Fryslie","updated_at":"2026-02-09T17:01:46.039449-07:00","dependencies":[{"issue_id":"cc-dump-aj7","depends_on_id":"cc-dump-ay4","type":"blocks","created_at":"2026-02-10T05:49:13.411404-07:00","created_by":"Brandon Fryslie"},{"issue_id":"cc-dump-aj7","depends_on_id":"cc-dump-9cx","type":"blocks","created_at":"2026-02-10T05:53:46.0929-07:00","created_by":"Brandon Fryslie"}]}
{"id":"cc-dump-ax6","title":"Track changed turn range during rerender","description":"Modify ConversationView.rerender() to track first_changed turn index instead of just a boolean. This provides the starting point for incremental offset recalculation. No dependencies - foundational change.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-03T03:19:31.481484-07:00","created_by":"bmf","updated_at":"2026-02-03T04:00:46.464414-07:00","closed_at":"2026-02-03T04:00:46.464417-07:00","dependencies":[{"issue_id":"cc-dump-ax6","depends_on_id":"cc-dump-ghm","type":"blocks","created_at":"2026-02-03T03:19:31.483882-07:00","created_by":"bmf"}]}
{"id":"cc-dump-ay4","title":"Refactor test suite for modularity and data-driven architecture","description":"Refactor test suite to improve quality, maintainability, and alignment with architectural principles:\n\n## Goals\n- Extract helpers/builders for common patterns (process management, TUI interaction, content validation)\n- Apply data-driven-architecture: same operations every run, variability in data not control flow\n- Ensure modularity and composability within test suites\n- Remove useless tests: keep single-purpose, flexible tests; remove unrealistic scenarios\n- Verify adequate coverage of realistic scenarios\n- Organize intelligently by feature/layer\n\n## Current State\n- Test suite runs in ~113s (optimized from 254s)\n- Class-scoped fixtures for process sharing\n- Some duplication in setup/assertion patterns\n- Mix of unit and integration tests without clear organization\n\n## Success Criteria\n- Reusable test builders/helpers extracted (e.g., TUIValidator, ProcessBuilder)\n- Tests follow data-driven patterns (parameterized where appropriate)\n- No dead/unrealistic tests\n- Clear organization (unit/integration/e2e hierarchy)\n- Coverage maintained or improved\n- Runtime ≤113s (no regression)","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-10T05:32:30.651808-07:00","created_by":"Brandon Fryslie","updated_at":"2026-02-10T17:01:19.195743-07:00","closed_at":"2026-02-10T17:01:19.195743-07:00","close_reason":"Closed"}
{"id":"cc-dump-bbe","title":"Add lazy off-viewport rendering in render_line()","description":"Modify render_line() to check for _pending_filter_snapshot on turns and lazily re-render them when they scroll into view. Completes the viewport optimization by deferring off-screen work. Blocked by cc-dump-16r (needs viewport logic).","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-03T03:19:57.265968-07:00","created_by":"bmf","updated_at":"2026-02-03T13:57:06.515233-07:00","closed_at":"2026-02-03T13:57:06.515233-07:00","close_reason":"Implemented lazy off-viewport rendering: render_line() checks _pending_filter_snapshot and re-renders turns on-demand when scrolled into view, with deferred offset recalculation via call_later()","dependencies":[{"issue_id":"cc-dump-bbe","depends_on_id":"cc-dump-16r","type":"blocked-by","created_at":"2026-02-03T03:19:57.269158-07:00","created_by":"bmf"},{"issue_id":"cc-dump-bbe","depends_on_id":"cc-dump-ghm","type":"blocks","created_at":"2026-02-03T03:19:57.269952-07:00","created_by":"bmf"}]}
{"id":"cc-dump-djl","title":"Show something meaningful for tool results when collapsed","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-24T21:50:25.760177-07:00","created_by":"bmf","updated_at":"2026-01-30T15:48:13.257814-07:00","closed_at":"2026-01-30T15:48:13.257814-07:00","close_reason":"Implemented in Sprint 4 (tool-correlation-summaries), commit 721e7a7. Tool results show summary with tool name when collapsed."}
{"id":"cc-dump-dlc","title":"Show front-ellipsed filename for Read tool","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-24T21:48:04.558606-07:00","created_by":"bmf","updated_at":"2026-01-30T15:48:07.492664-07:00","closed_at":"2026-01-30T15:48:07.492664-07:00","close_reason":"Implemented in Sprint 3 (tool-display-enrich), commit 94dd3a3. _tool_detail() extracts file_path and front-ellipses it via _front_ellipse_path()."}
{"id":"cc-dump-dos","title":"Replace byte-based token estimates with actual data in economics panel","description":"Current tool economics panel uses fake estimates from byte sizes.\n\nNeed to use actual token counts from database instead of estimates.\n\nThis is a interim fix while we wait for per-tool attribution (cc-dump-un8).\nFor now, show what we actually have accurately rather than bad estimates.","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-02-02T20:35:44.343545-07:00","created_by":"bmf","updated_at":"2026-02-03T05:39:26.623304-07:00","closed_at":"2026-02-03T05:39:26.623304-07:00","close_reason":"Already implemented in Sprint 1 (cc-dump-un8). Panel now uses actual token counts from tool_invocations table (input_tokens, result_tokens) instead of byte-based estimates. See db_queries.py:135-136."}
{"id":"cc-dump-e38","title":"Cache per-turn widest line width","description":"Add _widest_strip field to TurnData and cache it during re_render(). Update _recalculate_offsets_from() to use cached values instead of iterating all strips. Eliminates O(n*m) strip iteration for width calculation. Independent but enhances cc-dump-0oo.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-03T03:19:44.748785-07:00","created_by":"bmf","updated_at":"2026-02-03T04:00:50.92838-07:00","closed_at":"2026-02-03T04:00:50.928382-07:00","dependencies":[{"issue_id":"cc-dump-e38","depends_on_id":"cc-dump-ghm","type":"blocks","created_at":"2026-02-03T03:19:44.751603-07:00","created_by":"bmf"}]}
{"id":"cc-dump-e3g","title":"Tool use and tool_response should be correlated via colors","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-24T21:50:20.07312-07:00","created_by":"bmf","updated_at":"2026-01-30T15:48:11.662458-07:00","closed_at":"2026-01-30T15:48:11.662458-07:00","close_reason":"Implemented in Sprint 4 (tool-correlation-summaries), commit 721e7a7. Tool use/result pairs share correlated colors via tool_use_id lookup."}
{"id":"cc-dump-eih","title":"Indicate subagents in TUI","description":"Currently we don't do anything special to handle or indicate subagents. We should add some visual indication when Claude is running subagents (e.g., in the conversation view, analytics panels, or status indicators).","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-09T17:01:43.897784-07:00","created_by":"Brandon Fryslie","updated_at":"2026-02-09T17:01:43.897784-07:00","dependencies":[{"issue_id":"cc-dump-eih","depends_on_id":"cc-dump-ay4","type":"blocks","created_at":"2026-02-10T05:49:13.462704-07:00","created_by":"Brandon Fryslie"},{"issue_id":"cc-dump-eih","depends_on_id":"cc-dump-8bn","type":"blocks","created_at":"2026-02-10T05:53:46.319009-07:00","created_by":"Brandon Fryslie"}]}
{"id":"cc-dump-ekt","title":"Decide content type breakdown approach","description":"Architecture decision: how to handle content type token breakdown (system prompts, tool results, conversation, code). Options: (A) Estimated from request_json - user already rejected estimates. (B) Skip entirely - focus on cache/input/output which are real. (C) Request API enhancement from Anthropic - not under our control. Recommendation: Option B (skip). Ref: docs/plans/2026-02-01-analytics-dashboard-findings.md Decision 2","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-02T12:51:14.286131-07:00","created_by":"bmf","updated_at":"2026-02-02T12:51:14.286131-07:00","dependencies":[{"issue_id":"cc-dump-ekt","depends_on_id":"cc-dump-ay4","type":"blocks","created_at":"2026-02-10T05:49:13.621345-07:00","created_by":"Brandon Fryslie"}]}
{"id":"cc-dump-ghm","title":"Filter toggle performance optimization for large conversations","description":"Epic: Filter toggle performance optimization for large conversations\n\n## Problem\nFilter toggles become slow in large conversations (1000+ turns). Current implementation has O(n×m) complexity where n=turns and m=avg strips per turn. This causes noticeable lag when toggling filters.\n\n## Performance Bottlenecks\n1. ALL turns are checked for re-rendering (O(n))\n2. Offset recalculation iterates all turns and strips (O(n×m))\n3. Complete cache invalidation on every change\n4. Unnecessary strip width scanning\n\n## Solution Phases\n\n### Phase 1: Quick Wins (P1) - 5-10× speedup\n- cc-dump-ax6: Track changed turn range\n- cc-dump-0oo: Incremental offset recalculation\n- cc-dump-e38: Cache per-turn widest line\n\n### Phase 2: Medium-Term (P2) - 20-50× speedup for large convos\n- cc-dump-16r: Viewport-only re-rendering\n- cc-dump-bbe: Lazy off-viewport rendering\n- cc-dump-0fe: Partial cache invalidation\n\n### Phase 3: Future (P3) - Polish \u0026 edge cases\n- cc-dump-ozs: Background rendering\n- cc-dump-o7u: Strip content hashing\n\n## Expected Gains\n100 turns: 50ms → 5ms\n1,000 turns: 500ms → 20ms\n10,000 turns: 5s → 50ms\n\n## Implementation Order\nPhase 1 first (foundation), then Phase 2 (viewport), then Phase 3 (polish).","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-03T03:19:25.645213-07:00","created_by":"bmf","updated_at":"2026-02-03T05:45:15.536051-07:00","closed_at":"2026-02-03T05:45:15.536051-07:00","close_reason":"Phase 2/3 optimizations completed: block caching, selective cache invalidation, DB indexes, SQL aggregation"}
{"id":"cc-dump-h86","title":"Fix token formatting: remove 't' suffix, just use 'k'","description":"Current formatting shows '2.5kt' but should show '2.5k'.\n\nWe already know we're talking about tokens, the 't' suffix is redundant.\n\nChange _fmt_tokens() usage in panel renderers to not append 't'.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-02T20:35:52.793249-07:00","created_by":"bmf","updated_at":"2026-02-03T05:38:56.395705-07:00","closed_at":"2026-02-03T05:38:56.395705-07:00","close_reason":"Fixed token formatting - removed 't' suffix, now shows '2.5k' instead of '2.5kt'. Part of model breakdown implementation."}
{"id":"cc-dump-hf2","title":"Improve analytics panels","description":"Current analytics panels need enhancement. Consider: better visualizations, more useful metrics, clearer layout, and potentially new analytics dimensions.","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-09T17:01:47.06878-07:00","created_by":"Brandon Fryslie","updated_at":"2026-02-09T17:01:47.06878-07:00","dependencies":[{"issue_id":"cc-dump-hf2","depends_on_id":"cc-dump-ay4","type":"blocks","created_at":"2026-02-10T05:49:13.358801-07:00","created_by":"Brandon Fryslie"},{"issue_id":"cc-dump-hf2","depends_on_id":"cc-dump-8bn","type":"blocks","created_at":"2026-02-10T05:53:46.242502-07:00","created_by":"Brandon Fryslie"}]}
{"id":"cc-dump-hrz","title":"Improve display of tool use results","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-10T05:18:45.746365-07:00","created_by":"Brandon Fryslie","updated_at":"2026-02-10T05:18:45.746365-07:00","dependencies":[{"issue_id":"cc-dump-hrz","depends_on_id":"cc-dump-ay4","type":"blocks","created_at":"2026-02-10T05:49:12.817079-07:00","created_by":"Brandon Fryslie"},{"issue_id":"cc-dump-hrz","depends_on_id":"cc-dump-9v5","type":"blocks","created_at":"2026-02-10T05:53:46.168556-07:00","created_by":"Brandon Fryslie"}]}
{"id":"cc-dump-i17","title":"Add HAR recording and replay capabilities to allow restoring application from saved state","description":"Implement comprehensive HTTP request/response recording (HAR format or equivalent) and replay capabilities. Key requirements:\n\n1. Verbatim persistent recording of all HTTP requests/responses\n2. HAR format preferred, but must choose format that fulfills all needs\n3. Loading from serialization must become the DEFAULT/ONLY code path\n4. Critical architectural constraint: Write/read code must hand data to live pipeline\n5. Goal: Zero divergence between 'live display' and 'restore session' code paths\n\nThis ensures single source of truth (recorded data) and eliminates dual-write risk.\n\n## Progress\n\n**Sprint 1 (event-recording): COMPLETE** (commit 2d772e7)\n- HAR 1.2 recording subscriber implemented\n- Accumulates streaming SSE events, reconstructs complete messages\n- Integrated into cli.py with --record/--no-record flags\n- 18 comprehensive tests, all passing\n- Default output: ~/.local/share/cc-dump/recordings/recording-\u003csession\u003e.har\n\n**Sprint 2 (event-replay): COMPLETE** (commit 0ada6d0)\n- HAR replay module implemented (har_replayer.py)\n- load_har(): parses HAR and extracts request/response pairs\n- convert_to_events(): converts complete messages to synthetic SSE events\n- CLI --replay flag: batch loads all events and displays in TUI\n- Uses same pipeline (router → subscribers → formatting) as live mode\n- 25 tests (21 unit + 4 integration), all passing\n- Content tracking state accumulates identically to live sessions\n\n**Sprint 3 (unification): TODO**\n- Make replay the default code path\n- Ensure zero divergence between live and replay display","notes":"Completed all 3 sprints: HAR recording, replay, and pipeline unification. 21 new tests passing. HAR is now single source of truth.","status":"closed","priority":0,"issue_type":"task","created_at":"2026-02-03T03:48:26.886057-07:00","created_by":"bmf","updated_at":"2026-02-03T05:46:10.791453-07:00","closed_at":"2026-02-03T05:46:10.791456-07:00","close_reason":"Sprint 3 complete: session management (--list, --replay latest), end-to-end tests (21 tests, zero divergence verified), architecture documentation updated. HAR = source of truth, SQLite = derived index. All acceptance criteria met."}
{"id":"cc-dump-i7p","title":"Improve search widget keyboard shortcuts","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-10T05:18:44.932569-07:00","created_by":"Brandon Fryslie","updated_at":"2026-02-10T05:18:44.932569-07:00","dependencies":[{"issue_id":"cc-dump-i7p","depends_on_id":"cc-dump-ay4","type":"blocks","created_at":"2026-02-10T05:49:12.86856-07:00","created_by":"Brandon Fryslie"},{"issue_id":"cc-dump-i7p","depends_on_id":"cc-dump-ub9","type":"blocks","created_at":"2026-02-10T05:53:46.46743-07:00","created_by":"Brandon Fryslie"}]}
{"id":"cc-dump-iwe","title":"Highlight special request content and add navigation","description":"Highlight when requests contain: CLAUDE.md content, hook insertions, skill considerations, skill sends, or tool use lists. Add navigation between these sections. Foundation: build generic 'go to location' functionality usable by search too.","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-09T17:14:44.671327-07:00","created_by":"Brandon Fryslie","updated_at":"2026-02-09T17:14:44.671327-07:00","dependencies":[{"issue_id":"cc-dump-iwe","depends_on_id":"cc-dump-ay4","type":"blocks","created_at":"2026-02-10T05:49:13.255306-07:00","created_by":"Brandon Fryslie"}]}
{"id":"cc-dump-ky0","title":"Refactor app.py into independent logical modules","description":"app.py is 1287 lines containing multiple distinct concerns that should be separated into independent modules for better maintainability and testability.\n\n## Current Structure Issues\n- Monolithic 1287-line file mixing UI, state management, event handling, search, hot-reload, and theme logic\n- Search functionality alone is 400+ lines (lines 875-1282)\n- Hot-reload logic is 150+ lines mixed with app lifecycle\n- Category configuration, action handlers, reactive watchers, and panel management all intermingled\n\n## Proposed Module Structure\n\n1. **tui/category_config.py** - Category visibility configuration\n   - _CATEGORY_CONFIG definition\n   - _VIS_ATTR, _DEFAULT_DETAIL lookups\n   - _SHIFTED_NUMBERS mapping\n   - Category-related constants\n\n2. **tui/app_state.py** - Application state management\n   - AppState dataclass with all state fields\n   - State initialization logic\n   - State serialization for hot-reload preservation\n\n3. **tui/widget_manager.py** - Widget lifecycle and access\n   - Widget query/accessor methods (_get_conv, _get_stats, etc.)\n   - Widget replacement logic (hot-reload widget swapping)\n   - Widget state preservation/restoration\n\n4. **tui/action_handlers.py** - Action handler implementations\n   - All action_* methods extracted as functions\n   - Navigation actions (scroll, go_top, go_bottom, etc.)\n   - Visibility toggle actions\n   - Panel toggle actions\n   - Theme cycling actions\n\n5. **tui/search_controller.py** - Search functionality\n   - All search-related methods (_start_search, _commit_search, etc.)\n   - Search key handling (_handle_search_editing_key, _handle_search_nav_special_keys)\n   - Search navigation (_navigate_next, _navigate_prev, _navigate_to_current)\n   - Search rendering coordination\n\n6. **tui/hot_reload_controller.py** - Hot-reload coordination\n   - _check_hot_reload logic\n   - _replace_all_widgets logic\n   - Module reload orchestration\n\n7. **tui/theme_controller.py** - Theme management\n   - Theme cycling (_cycle_theme, action_next_theme, action_prev_theme)\n   - Markdown theme application (_apply_markdown_theme)\n   - Theme-related reactive watchers\n\n8. **tui/reactive_handlers.py** - Reactive watcher implementations\n   - All watch_* methods\n   - _rerender_if_mounted helper\n   - Filter state management\n\n## Design Principles (from CLAUDE.md)\n\nFollow these architectural laws during refactoring:\n\n- [LAW:one-source-of-truth] Each piece of state lives in exactly one place\n- [LAW:dataflow-not-control-flow] Structure mirrors data flow, variability in values not control paths\n- [LAW:single-enforcer] Cross-cutting concerns enforced at one boundary\n- [LAW:one-way-deps] Clear dependency direction, no cycles\n- [LAW:locality-or-seam] Changes to X don't force edits in unrelated Y\n\n## Implementation Strategy\n\n1. Extract modules in dependency order (bottom-up):\n   - category_config (no deps)\n   - app_state (minimal deps)\n   - theme_controller (depends on app_state)\n   - reactive_handlers (depends on app_state, theme_controller)\n   - widget_manager (depends on app_state)\n   - action_handlers (depends on widget_manager, app_state)\n   - search_controller (depends on widget_manager, app_state)\n   - hot_reload_controller (depends on widget_manager, all others)\n\n2. For each module:\n   - Extract methods as pure functions where possible (pass state explicitly)\n   - Keep CcDumpApp as thin coordinator\n   - Add type hints and docstrings\n   - Update tests to verify no regressions\n\n3. Final CcDumpApp should be:\n   - \u003c 300 lines (compose, on_mount, on_key dispatcher, thin delegates)\n   - Clear separation of concerns\n   - Easy to test each module independently\n\n## Success Criteria\n\n- All tests pass (pytest)\n- app.py \u003c 300 lines\n- Each extracted module \u003c 400 lines\n- Clear module boundaries with documented interfaces\n- No circular dependencies\n- Hot-reload still works (tests/test_hot_reload.py passes)\n- Search functionality preserved (all search tests pass)\n\n## Risks\n\n- Hot-reload state preservation during refactor\n- Search state coupling to app lifecycle\n- Reactive watcher dependencies on app instance\n- Test breakage if module boundaries wrong\n\n## Related Issues\n\n- Supports future work on [cc-dump-6dh] widget factory refactor\n- Enables easier testing of individual concerns\n- Improves hot-reload reliability by reducing coupling","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-10T22:05:20.528486-07:00","created_by":"Brandon Fryslie","updated_at":"2026-02-12T02:45:27.773397-07:00","closed_at":"2026-02-12T02:45:27.773397-07:00","close_reason":"Refactored app.py (1592→626 lines) into 6 focused modules: category_config.py, action_handlers.py, search_controller.py, dump_export.py, theme_controller.py, hot_reload_controller.py. Data-driven cleanup applied: visibility toggles via config spec, panel toggles via config dict, navigation via _conv_action. All 611 tests pass."}
{"id":"cc-dump-nen","title":"Update tool economics panel with new columns","description":"Implement new tool economics panel view with requested columns.\n\nRequired columns (grouped by tool):\n- Calls: Number of invocations\n- Input (Cached): e.g. '420k (69%)' showing input tokens with cache hit %\n- Output (Cached): Output tokens with cache hit %\n- Norm Cost: Normalized cost (1 Haiku base token = 1 unit)\n\nPricing table for normalization:\nModel              Base Input    Cache Write(5m)    Cache Hit    Output\nClaude Opus 4.5    $5/MTok      $6.25/MTok        $0.50/MTok  $25/MTok\nClaude Sonnet 4.5  $3/MTok      $3.75/MTok        $0.30/MTok  $15/MTok\nClaude Haiku 4.5   $1/MTok      $1.25/MTok        $0.10/MTok  $5/MTok\n\nBlocked by: schema changes to track per-tool attribution (cc-dump-un8)","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-02T20:35:35.456442-07:00","created_by":"bmf","updated_at":"2026-02-03T05:38:49.453815-07:00","closed_at":"2026-02-03T05:38:49.453815-07:00","close_reason":"Implemented tool economics panel with model breakdown toggle (Ctrl+M). Panel shows aggregate view by default, toggles to per-model breakdown. All tests passing.","dependencies":[{"issue_id":"cc-dump-nen","depends_on_id":"cc-dump-un8","type":"blocks","created_at":"2026-02-02T20:35:35.459345-07:00","created_by":"bmf"}]}
{"id":"cc-dump-o7u","title":"Add strip content hashing to detect unchanged renders","description":"Add _strip_hash field to TurnData and compute hash of strip content in re_render(). Skip strip replacement when hash matches (no actual change). Independent optimization that reduces unnecessary updates. Can be implemented anytime but benefits from all other optimizations being in place.","status":"open","priority":3,"issue_type":"task","created_at":"2026-02-03T03:20:13.991573-07:00","created_by":"bmf","updated_at":"2026-02-03T03:20:13.991573-07:00","dependencies":[{"issue_id":"cc-dump-o7u","depends_on_id":"cc-dump-ghm","type":"blocks","created_at":"2026-02-03T03:20:13.994952-07:00","created_by":"bmf"},{"issue_id":"cc-dump-o7u","depends_on_id":"cc-dump-ay4","type":"blocks","created_at":"2026-02-10T05:49:13.889337-07:00","created_by":"Brandon Fryslie"}]}
{"id":"cc-dump-ozs","title":"Add background rendering for off-viewport turns","description":"Implement _background_rerender() async method that processes off-viewport turns in background using call_later() with yields to keep UI responsive. Requires viewport logic (cc-dump-16r) and lazy rendering (cc-dump-bbe) to be complete.","status":"open","priority":3,"issue_type":"task","created_at":"2026-02-03T03:20:07.502008-07:00","created_by":"bmf","updated_at":"2026-02-03T03:20:07.502008-07:00","dependencies":[{"issue_id":"cc-dump-ozs","depends_on_id":"cc-dump-16r","type":"blocked-by","created_at":"2026-02-03T03:20:07.504863-07:00","created_by":"bmf"},{"issue_id":"cc-dump-ozs","depends_on_id":"cc-dump-bbe","type":"blocked-by","created_at":"2026-02-03T03:20:07.505741-07:00","created_by":"bmf"},{"issue_id":"cc-dump-ozs","depends_on_id":"cc-dump-ghm","type":"blocks","created_at":"2026-02-03T03:20:07.506307-07:00","created_by":"bmf"},{"issue_id":"cc-dump-ozs","depends_on_id":"cc-dump-ay4","type":"blocks","created_at":"2026-02-10T05:49:13.940529-07:00","created_by":"Brandon Fryslie"}]}
{"id":"cc-dump-q4k","title":"Add request-ID tagging to support concurrent streaming","description":"With ThreadingHTTPServer, concurrent /v1/messages requests can interleave events in the queue. Downstream consumers (store, HAR recorder, TUI) currently assume sequential request-response pairs. Add req_id to all event tuples, key consumer state by request ID, and support concurrent streaming turns in ConversationView.","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-12T15:34:22.95702-07:00","created_by":"Brandon Fryslie","updated_at":"2026-02-12T15:34:22.95702-07:00","labels":["concurrency","proxy"]}
{"id":"cc-dump-qcd","title":"Tag user config and allow navigation between it","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-10T05:18:42.746406-07:00","created_by":"Brandon Fryslie","updated_at":"2026-02-10T05:18:42.746406-07:00","dependencies":[{"issue_id":"cc-dump-qcd","depends_on_id":"cc-dump-ay4","type":"blocks","created_at":"2026-02-10T05:49:12.978898-07:00","created_by":"Brandon Fryslie"}]}
{"id":"cc-dump-s3v","title":"Sprint 1: Token counting infrastructure","description":"Implement token counting infrastructure for per-tool attribution using tiktoken (local).\n\nDeliverables:\n- Token counter module using tiktoken (local, no API calls)\n- Schema migration (add input_tokens, result_tokens columns to tool_invocations)\n- Wire into store.py to populate on turn commit\n- Add tiktoken dependency\n\nBenefits:\n- No API rate limits\n- Fast (~1ms per text)\n- No network latency\n- ~95% accuracy vs Claude tokenizer (sufficient for economics)\n\nSee: .agent_planning/tool-attribution/SPRINT-20260203-120000-token-counting-infra-PLAN.md\n\nStatus: HIGH confidence (3 items), READY FOR IMPLEMENTATION","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-03T03:20:50.421734-07:00","created_by":"bmf","updated_at":"2026-02-03T04:54:26.212468-07:00","closed_at":"2026-02-03T04:54:26.212474-07:00","dependencies":[{"issue_id":"cc-dump-s3v","depends_on_id":"cc-dump-un8","type":"blocks","created_at":"2026-02-03T03:20:50.423196-07:00","created_by":"bmf"}]}
{"id":"cc-dump-t9f","title":"Clarify economics panel column names","description":"Current columns are unclear:\n- 'Input↑' - OK, input tokens\n- 'Results↓' - Unclear. Is this output tokens? Tool result tokens?\n- 'Total' - Input + Output? Input + Results? What exactly?\n\nNeed clearer column headers that make it obvious what each number represents.\n\nConsider: Calls | Input | Output | Total\nor: Calls | Tool Input | Tool Results | Combined","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-02T20:36:00.891024-07:00","created_by":"bmf","updated_at":"2026-02-03T05:39:02.761044-07:00","closed_at":"2026-02-03T05:39:02.761044-07:00","close_reason":"Clarified column names. Economics panel now shows: Tool | Calls | Input (Cached) | Output | Norm Cost (aggregate view) or Tool | Model | Calls | Input (Cached) | Output | Norm Cost (breakdown view)."}
{"id":"cc-dump-ub9","title":"Improve search performance","description":"Search is currently slow and needs performance optimization.","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-09T17:14:45.702313-07:00","created_by":"Brandon Fryslie","updated_at":"2026-02-09T17:14:45.702313-07:00","dependencies":[{"issue_id":"cc-dump-ub9","depends_on_id":"cc-dump-ay4","type":"blocks","created_at":"2026-02-10T05:49:13.202594-07:00","created_by":"Brandon Fryslie"}]}
{"id":"cc-dump-un8","title":"Add per-tool token attribution to database schema","description":"Track actual token counts, cache data, and model per tool invocation.\n\nCurrent state:\n- tool_invocations table only has: tool_name, input_bytes, result_bytes\n- No actual tokens, cache data, or model information\n\nRequired changes:\n- Link tool invocations to turn_id (to get model)\n- Store actual input_tokens, output_tokens per tool invocation\n- Store cache_read_tokens, cache_creation_tokens per tool invocation\n- Update event handlers to populate this data from streaming events\n\nThis enables the tool economics panel to show:\nCalls | Input (Cached) | Output (Cached) | Norm Cost\ngrouped by tool name.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-02T20:35:23.459888-07:00","created_by":"bmf","updated_at":"2026-02-03T04:54:36.226296-07:00","closed_at":"2026-02-03T04:54:36.226299-07:00"}
{"id":"cc-dump-ur4","title":"Add keyboard shortcut for cycling next/previous theme","description":"Add keybindings to cycle through available themes (next/prev). Should not appear in the footer bar.","status":"closed","priority":3,"issue_type":"task","created_at":"2026-02-10T14:41:08.6721-07:00","created_by":"Brandon Fryslie","updated_at":"2026-02-11T08:53:16.825652-07:00","closed_at":"2026-02-11T08:53:16.825652-07:00","close_reason":"Closed"}
{"id":"cc-dump-xyt","title":"Track token usage vs individual capacity","description":"Show token usage in relation to user's individual capacity remaining. Difficult because: (1) this is only one session, (2) doesn't account for tokens used in other concurrent sessions, (3) API doesn't expose per-user capacity data. May need creative workarounds or partial solutions.","status":"open","priority":3,"issue_type":"task","created_at":"2026-02-09T17:01:51.485345-07:00","created_by":"Brandon Fryslie","updated_at":"2026-02-09T17:01:51.485345-07:00","dependencies":[{"issue_id":"cc-dump-xyt","depends_on_id":"cc-dump-ay4","type":"blocks","created_at":"2026-02-10T05:49:13.784767-07:00","created_by":"Brandon Fryslie"},{"issue_id":"cc-dump-xyt","depends_on_id":"cc-dump-8bn","type":"blocks","created_at":"2026-02-10T05:53:46.392856-07:00","created_by":"Brandon Fryslie"}]}
{"id":"cc-dump-zni","title":"Default to port 0 (OS-assigned port) instead of fixed port","description":"Change default port behavior to use port 0, allowing the OS to assign an available port automatically.\n\n## Current Behavior\ncc-dump uses a fixed default port (likely 3344 or similar), which can cause conflicts when running multiple instances.\n\n## Proposed Behavior\n- Default to port 0 when no --port argument is provided\n- OS automatically assigns an available port\n- Port number is displayed in the TUI so user knows where to connect\n- User can still specify explicit port with --port argument if needed\n\n## Benefits\n- No port conflicts when running multiple cc-dump instances\n- Simpler local development and testing\n- Follows common practice for development tools\n\n## Success Criteria\n- Default port is 0 (no --port argument)\n- OS-assigned port is displayed clearly in UI\n- --port argument still works to specify explicit port\n- No regression in existing functionality","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-10T13:36:27.885807-07:00","created_by":"Brandon Fryslie","updated_at":"2026-02-10T17:07:48.20165-07:00","closed_at":"2026-02-10T17:07:48.20165-07:00","close_reason":"Implemented OS-assigned port (port 0) as default. Tests passing."}
